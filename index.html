<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Happy Birthday</title>
  <style>
    :root{--bg1:#fff7f3;--bg2:#fff6ff;--card:#ffffff;--accent:#ff6fb5;--accent2:#ffcc4d;--muted:#6b6b6b}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial;color:#111;background:linear-gradient(180deg,var(--bg1),var(--bg2));-webkit-font-smoothing:antialiased}
    .wrap{min-height:100%;display:flex;align-items:center;justify-content:center;padding:28px}
    .card{width:100%;max-width:820px;background:var(--card);border-radius:16px;padding:28px;box-shadow:0 18px 40px rgba(15,20,30,.08);border:1px solid rgba(0,0,0,.03)}
    .intro{display:flex;gap:18px;align-items:flex-start}
    h1{margin:0;font-size:24px;color:#111}
    p{margin:6px 0 14px;color:var(--muted);line-height:1.5}
    .form{display:flex;gap:10px;align-items:center;margin-top:8px}
    input[type=text]{flex:1;padding:12px;border-radius:12px;border:1px solid rgba(0,0,0,.06);background:linear-gradient(180deg,#fff,#fff);color:inherit;box-shadow:inset 0 1px 0 rgba(255,255,255,.6)}
    button{padding:10px 14px;border-radius:12px;border:0;background:linear-gradient(90deg,var(--accent),#b86ce0);color:white;cursor:pointer;font-weight:600}
    .error{color:#d23a4a;margin-top:10px}
    .message{white-space:pre-wrap;font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial;background:linear-gradient(90deg,#fff6fb,#fffef7);padding:18px;border-radius:12px;margin-top:16px;border:1px solid rgba(0,0,0,.03);color:#222}
    .cake{font-size:42px;text-align:center;margin-top:18px;line-height:1.1;white-space:pre-wrap}
    .center{display:flex;gap:8px;align-items:center;justify-content:center;margin-top:12px}
    .hidden{display:none}
    .finalTitle{font-size:22px;margin:0}
    .finalText{color:var(--muted);margin-top:8px;white-space:pre-wrap}
    .confetti-piece{position:fixed;pointer-events:none;z-index:9999;top:-10px;opacity:0.95}
    @keyframes fall {to{transform:translateY(110vh) rotate(360deg)}}
    @media (max-width:420px){ .card{padding:18px} input[type=text]{padding:10px} button{padding:10px 12px} }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card" id="card">
      <div id="intro">
        <div class="intro">
          <div>
            <h1>Hello üëã</h1>
            <p>This is a small birthday surprise prepared by Arshia. Just type your first-name and open it.</p>
            <div id="step1">
              <div class="form">
                <input id="nameInput" name="name" type="text" placeholder="name..." autocomplete="off" required>
                <button id="openBtn" type="button">Open</button>
              </div>
              <div id="err" class="error hidden">This page is not for you üòè.</div>
            </div>
          </div>
        </div>
      </div>

      <div id="step2" class="hidden">
        <div class="message" id="messageBlock"></div>
        <div class="center">
          <button id="blowBtn" type="button">Make a wish and blow out the candles!</button>
        </div>
        <div class="cake" id="cakeBlock"></div>
      </div>

      <div id="final" class="hidden">
        <h2 class="finalTitle" id="finalTitle"></h2>
        <p class="finalText" id="finalText"></p>
        <div class="cake" id="smallCake"></div>
      </div>

    </div>
  </div>

  <script>

    const FULL = {
      fatemeh: `Happy Birthday, Fatemeh ü•≥

It's been so great getting to know you in our class. You're a wonderful friend. 
I hope you have an amazing day and a fantastic year ahead, full of happiness, health, and success!

Best wishes üí´, Arshia`,

      mohammad: `Happy Birthday, Mohammad Hassan üéâ

Man, it's been fun having you in class all this time. You're a great guy! 
Wishing you a very happy birthday and an awesome year. Hope it's filled with good times and new achievements.

Cheers ü•Ç, Arshia`
    };

    const PREVIEW = {
      fatemeh: `Dear Fatemeh,

You found it!, Make a wish, and press the button below.`,
      mohammad: `Dear Mohammad Hassan,

You found it! Make a wish, and press the button below.`
    };

    const MESSAGES = {
      fatemeh: {
        title: 'Happy Birthday, Fatemeh üéâ',
        preview: PREVIEW.fatemeh,
        full: FULL.fatemeh,
        cake: 'üéÇ\nüïØÔ∏èüïØÔ∏èüïØÔ∏è',
        finalCake: 'üéÇüéÅüßÅ',
        confettiColors: ['#FF6FB5','#FFD2EA','#FFCC4D','#FFD6F0']
      },
      mohammad: {
        title: 'Happy Birthday, Mohammad Hassan üéä',
        preview: PREVIEW.mohammad,
        full: FULL.mohammad,
        cake: 'üç∞\nüïØÔ∏èüïØÔ∏è',
        finalCake: 'üç∞üéâü•Ç',
        confettiColors: ['#7CE3B6','#9AD2FF','#C89BFF','#FFD66B']
      }
    };

    const fatemehKeys = new Set(['fatemeh','ŸÅÿßÿ∑ŸÖŸá','f√£temeh','fatma','fateme']);
    const mohKeys = new Set(['mohammad hassan','mohammadhassan','mohammad','mohammadhasan','mohamad','ŸÖÿ≠ŸÖÿØ ÿ≠ÿ≥ŸÜ','ŸÖÿ≠ŸÖÿØ','moham']);

    function normalize(s){ return String(s||'').trim().toLowerCase().replace(/\u200c/g,' ').replace(/\s+/g,' ').normalize('NFKC') }

    function matchName(raw){
      const n = normalize(raw);
      if(!n) return null;
      if(fatemehKeys.has(n)) return 'fatemeh';
      if(mohKeys.has(n)) return 'mohammad';
      if(n.includes('ŸÅÿßÿ∑ŸÖŸá')) return 'fatemeh';
      if(n.includes('fatemeh')) return 'fatemeh';
      if(n.includes('ŸÖÿ≠ŸÖÿØ')) return 'mohammad';
      if(n.includes('mohammad') || n.includes('moham') || n.includes('moh')) return 'mohammad';
      return null;
    }

    function q(id){ return document.getElementById(id) }

    document.getElementById('openBtn').addEventListener('click', function () {
      const raw = q('nameInput').value;
      const matched = matchName(raw);
      if(!matched){
        q('err').classList.remove('hidden');
        return;
      }
      q('err').classList.add('hidden');
      q('intro').classList.add('hidden');
      q('step2').classList.remove('hidden');
      const data = MESSAGES[matched];
      q('messageBlock').textContent = data.preview;
      q('cakeBlock').textContent = data.cake;
      q('openBtn').disabled = true;
      q('openBtn').dataset.matched = matched;
    });

    q('blowBtn').addEventListener('click', ()=>{
      q('step2').classList.add('hidden');
      q('final').classList.remove('hidden');
      const matched = q('openBtn').dataset.matched || matchName(q('nameInput').value) || 'fatemeh';
      const data = MESSAGES[matched];
      q('finalTitle').textContent = data.title;
      q('finalText').textContent = data.full;
      q('smallCake').textContent = data.finalCake;
      launchConfetti(data.confettiColors);
      q('blowBtn').disabled = true;
    });

    (function(){
      const params = new URLSearchParams(location.search);
      const pre = params.get('name');
      if(pre){ q('nameInput').value = pre; }
    })();

    function rand(min,max){return Math.floor(Math.random()*(max-min+1))+min}
    function launchConfetti(colors){
      const palette = colors && colors.length? colors : ['#FF6FB5','#FFD66B','#7CE3B6','#9AD2FF','#C89BFF'];
      for(let i=0;i<40;i++){
        const el=document.createElement('div');
        el.className='confetti-piece';
        el.style.left=rand(5,95)+'vw';
        el.style.background=palette[rand(0,palette.length-1)];
        el.style.width=rand(6,12)+'px';
        el.style.height=rand(10,18)+'px';
        el.style.borderRadius=rand(0,50)+'%';
        el.style.transform='rotate('+rand(0,360)+'deg)';
        el.style.animation='fall '+(4+Math.random()*2)+'s linear forwards';
        el.style.animationDelay=(Math.random()*0.2)+'s';
        document.body.appendChild(el);
        setTimeout(()=>el.remove(),7000);
      }
    }
  </script>
</body>
</html>
